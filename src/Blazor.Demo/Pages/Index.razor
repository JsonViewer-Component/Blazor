@page "/"
@inject IJSRuntime JSRuntime

<PageTitle>JSON Viewer Component - Live Demo</PageTitle>

<div class="demo-container">
    @* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• *@
    @* Header Section                                                   *@
    @* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• *@
    <header class="demo-header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo-icon-container">
                    <span class="logo-icon">ğŸ”</span>
                </div>
                <div class="logo-text">
                    <h1>JsonViewer<span class="highlight">.Blazor</span></h1>
                    <div class="badges-inline">
                        <img src="https://img.shields.io/nuget/dt/JsonViewer.Blazor?style=flat-square&logo=nuget&color=a855f7" alt="NuGet Downloads" />
                        <img src="https://img.shields.io/github/stars/JsonViewer-Component/Blazor?style=flat-square&logo=github&color=ec4899" alt="GitHub Stars" />
                    </div>
                </div>
            </div>

            <nav class="header-nav">
                <button class="theme-toggle-btn" @onclick="ToggleTheme" title="Toggle Theme">
                    <span class="theme-toggle-icon">@(isDarkTheme ? "ğŸŒ™" : "â˜€ï¸")</span>
                </button>
                <a href="https://github.com/JsonViewer-Component/Blazor#readme" target="_blank" class="nav-link docs-link" title="View Documentation">
                    <span class="nav-icon">ğŸ“š</span>
                    <span class="nav-text">Documentation</span>
                </a>
                <a href="https://github.com/JsonViewer-Component/Blazor" target="_blank" class="nav-link github-link" title="View on GitHub">
                    <span class="nav-icon">â­</span>
                    <span class="nav-text">GitHub</span>
                </a>
                <a href="https://www.nuget.org/packages/JsonViewer.Blazor" target="_blank" class="nav-link nuget-link" title="View on NuGet">
                    <span class="nav-icon">ğŸ“¦</span>
                    <span class="nav-text">NuGet</span>
                </a>
            </nav>
        </div>
    </header>

    @* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• *@
    @* Main Component Demo                                              *@
    @* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• *@
    <section class="demo-section">
        <div class="section-header">
            <h2>
                <span class="section-icon">ğŸ”¬</span>
                Interactive Demo
            </h2>
            <p class="section-subtitle">Explore the component with different JSON data samples</p>
        </div>

        <div class="viewer-wrapper">
            <JsonViewer JsonData="@sampleJson" IsEditable="true" />
        </div>

        <div class="sample-tabs">
            <button class="sample-tab @(activeTemplate == "simple" ? "active" : "")" @onclick="LoadSimpleJson">
                <span class="tab-icon">ğŸ“„</span>
                <span class="tab-name">Simple</span>
            </button>
            <button class="sample-tab @(activeTemplate == "nested" ? "active" : "")" @onclick="LoadNestedJson">
                <span class="tab-icon">ğŸ“</span>
                <span class="tab-name">Nested</span>
            </button>
            <button class="sample-tab @(activeTemplate == "array" ? "active" : "")" @onclick="LoadArrayJson">
                <span class="tab-icon">ğŸ“Š</span>
                <span class="tab-name">Array</span>
            </button>
            <button class="sample-tab @(activeTemplate == "complex" ? "active" : "")" @onclick="LoadComplexJson">
                <span class="tab-icon">ğŸ¢</span>
                <span class="tab-name">Complex</span>
            </button>
        </div>

    </section>

    @* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• *@
    @* Quick Start Guide                                                *@
    @* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• *@
    <section class="quickstart-section">
        <div class="quickstart-content">
            <div class="quickstart-info">
                <h2>
                    <span class="section-icon">ğŸš€</span>
                    Quick Start
                </h2>
                <p class="quickstart-description">Get started with JsonViewer.Blazor in just a few simple steps</p>
                
                <div class="installation-step">
                    <h3>1. Install Package</h3>
                    <div class="code-block">
                        <code>dotnet add package JsonViewer.Blazor</code>
                        <button class="copy-btn" title="Copy to clipboard">ğŸ“‹</button>
                    </div>
                </div>

                <div class="installation-step">
                    <h3>2. Use the Component</h3>
                    <div class="code-block">
                        <code>@@lt;JsonViewer JsonData="@@jsonData" IsEditable="true" /@@gt;</code>
                        <button class="copy-btn" title="Copy to clipboard">ğŸ“‹</button>
                    </div>
                </div>

                <p class="quickstart-note">âœ¨ Full documentation available on <a href="https://github.com/JsonViewer-Component/Blazor#readme" target="_blank">GitHub</a></p>
            </div>
        </div>
    </section>

    @* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• *@
    @* Features Section                                                 *@
    @* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• *@
    <section class="features-section">
        <div class="section-header">
            <h2>
                <span class="section-icon">âœ¨</span>
                Powerful Features
            </h2>
            <p class="section-subtitle">Everything you need for JSON visualization and manipulation</p>
        </div>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon-wrapper">
                    <span class="feature-icon">ğŸ¨</span>
                </div>
                <h4>VS Code Styling</h4>
                <p>Beautiful syntax highlighting with familiar VS Code aesthetics</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon-wrapper">
                    <span class="feature-icon">ğŸ”</span>
                </div>
                <h4>Smart Search</h4>
                <p>Real-time search with navigation and highlighting</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon-wrapper">
                    <span class="feature-icon">ğŸ“Š</span>
                </div>
                <h4>Statistics</h4>
                <p>Size, depth, and type distribution analysis</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon-wrapper">
                    <span class="feature-icon">ğŸŒ™</span>
                </div>
                <h4>Theme Support</h4>
                <p>Dark & Light themes with automatic persistence</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon-wrapper">
                    <span class="feature-icon">âœï¸</span>
                </div>
                <h4>Edit Mode</h4>
                <p>Modify and validate JSON in real-time</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon-wrapper">
                    <span class="feature-icon">ğŸ“¥</span>
                </div>
                <h4>Export & Share</h4>
                <p>Copy and download JSON data easily</p>
            </div>
        </div>
    </section>

    @* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• *@
    @* Footer                                                           *@
    @* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• *@
    <footer class="demo-footer">
        <div class="footer-content">
            <p class="footer-credit">
                Made with â¤ï¸ by
                <a href="https://github.com/JsonViewer-Component" target="_blank">JsonViewer-Component</a>
            </p>
            <p class="footer-meta">v0.0.4-beta â€¢ MIT License â€¢ <a href="https://github.com/JsonViewer-Component/Blazor" target="_blank">GitHub</a></p>
        </div>
    </footer>
</div>

@code {
    private string sampleJson = string.Empty;
    private string activeTemplate = "simple";
    private bool isDarkTheme = true;
    private bool _isInitialized = false;

    protected override void OnInitialized()
    {
        LoadSimpleJson();
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender && !_isInitialized)
        {
            _isInitialized = true;
            await LoadThemePreference();
            await ApplyTheme();
            StateHasChanged();
        }
    }

    private async Task LoadThemePreference()
    {
        try
        {
            var savedTheme = await JSRuntime.InvokeAsync<string>("demoTheme.getTheme");
            if (!string.IsNullOrEmpty(savedTheme))
            {
                isDarkTheme = savedTheme != "light";
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading theme: {ex.Message}");
            isDarkTheme = true;
        }
    }

    private async Task ToggleTheme()
    {
        isDarkTheme = !isDarkTheme;
        await SaveThemePreference();
        await ApplyTheme();
        StateHasChanged();
    }

    private async Task SaveThemePreference()
    {
        try
        {
            var themeValue = isDarkTheme ? "dark" : "light";
            await JSRuntime.InvokeVoidAsync("demoTheme.saveTheme", themeValue);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error saving theme: {ex.Message}");
        }
    }

    private async Task ApplyTheme()
    {
        try
        {
            var themeValue = isDarkTheme ? "dark" : "light";
            await JSRuntime.InvokeVoidAsync("demoTheme.setTheme", themeValue);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error applying theme: {ex.Message}");
        }
    }

    private void LoadSimpleJson()
    {
        activeTemplate = "simple";
        sampleJson = @"{
  ""name"": ""John Doe"",
  ""age"": 30,
  ""email"": ""john@example.com"",
  ""active"": true,
  ""balance"": 1250.50
}";
    }

    private void LoadNestedJson()
    {
        activeTemplate = "nested";
        sampleJson = @"{
  ""user"": {
    ""id"": 1,
    ""name"": ""Jane Smith"",
    ""profile"": {
      ""avatar"": ""https://example.com/avatar.png"",
      ""bio"": ""Software Developer""
    },
    ""address"": {
      ""street"": ""123 Main St"",
      ""city"": ""New York"",
      ""country"": ""USA"",
      ""zipCode"": ""10001""
    }
  },
  ""settings"": {
    ""theme"": ""dark"",
    ""notifications"": true
  },
  ""timestamp"": ""2025-12-03T10:30:00Z""
}";
    }

    private void LoadArrayJson()
    {
        activeTemplate = "array";
        sampleJson = @"{
  ""products"": [
    {
      ""id"": 1,
      ""name"": ""MacBook Pro"",
      ""price"": 2499.99,
      ""inStock"": true
    },
    {
      ""id"": 2,
      ""name"": ""Magic Mouse"",
      ""price"": 99.99,
      ""inStock"": true
    },
    {
      ""id"": 3,
      ""name"": ""AirPods Pro"",
      ""price"": 249.99,
      ""inStock"": false
    }
  ],
  ""totalItems"": 3,
  ""totalValue"": 2849.97
}";
    }

    private void LoadComplexJson()
    {
        activeTemplate = "complex";
        sampleJson = @"{
  ""company"": {
    ""name"": ""Tech Innovations Inc."",
    ""founded"": 2015,
    ""headquarters"": {
      ""city"": ""San Francisco"",
      ""country"": ""USA""
    },
    ""employees"": [
      {
        ""id"": 1,
        ""name"": ""Alice Johnson"",
        ""role"": ""Senior Developer"",
        ""skills"": [""C#"", ""Blazor"", ""Azure""],
        ""yearsOfExperience"": 8
      },
      {
        ""id"": 2,
        ""name"": ""Bob Smith"",
        ""role"": ""UX Designer"",
        ""skills"": [""Figma"", ""UI/UX"", ""Design Systems""],
        ""yearsOfExperience"": 5
      }
    ],
    ""projects"": [
      {
        ""name"": ""JsonViewer.Blazor"",
        ""status"": ""Active"",
        ""contributors"": 12,
        ""stars"": 1250,
        ""lastUpdated"": ""2025-12-03""
      }
    ]
  }
}";
    }
}
